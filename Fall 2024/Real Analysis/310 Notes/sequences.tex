\chapter{Sequences}\label{chapter:sequences}
\vspace{12pt}

\section{Basic Definitions and Examples}
    \begin{definition}
        A \textui{sequence} in a metric space $X$ is a map $x: \bfN \rightarrow X$. We often write $x = (x_n)_{n \geq 1} = (x_1,x_2,x_3,...)$, where $x_n = x(n)$. If $X = \bfR$, we call $x$ a \textui{real sequence}.
    \end{definition}

    \begin{example}[Sequences Defined Explictly]
        \phantom{a}
        \begin{enumerate}[label = (\arabic*)]
            \item A constant sequence: $x_n = t$, $ (x_n)_{n \geq 1} = (t,t,t,t,...)$.
            \item Sequences defined by a function: $d_n = (1+\frac{1}{n})^n$.
            \item Geometric sequences\footnote{These are called geometric because the ratio between each $x_n$ is constant: $x_{n+1}/x_n = b^{n+1}/b^n = b$.}: fix $b \in \bfR$, $x_n = b^n$. Then $(x_n)_{n \geq 1} = (1,b,b^2,b^3,...)$.
        \end{enumerate}
    \end{example}

    \begin{example}[Sequences Defined Recursively]
        \phantom{a}
        \begin{enumerate}[label = (\arabic*)]
            \item Let $a_1 = 1$, $a_{n+1} = 2a_n + 1$. Then $(a_n)_{n \geq 1} = (1,3,7,15,...)$.
            \item Let $f_1 = 1$, $f_2 = 1$, $f_{n+1} = f_n + f_{n-1}$. Then $(f_n)_{n=1}^\infty = (1,1,2,3,5,8,...)$. This is the \textit{Fibonacci sequence}.
            \item Let $X$ be a metric space and $f:X \rightarrow X$ be an endomorphism. Fix $x_0 \in X$. Then define:
                \begin{equation*}
                \begin{split}
                    x_1 &= f(x_0) \\
                    x_2 &= f(x_1) \\
                    &\vdots \\
                    x_n &= f(x_{n-1}).
                \end{split}
                \end{equation*}
        \end{enumerate}
    \end{example}

    \begin{example}[New Sequences from Old]
        \phantom{a}
        \begin{enumerate}[label = (\arabic*)]
            \item Let $(a_n)_{n\geq 1}$ and $(b_n)_{n \geq 1}$ be sequences. Then define:
                \begin{equation*}
                \begin{split}
                    (a_n)_{n\geq 1} \pm (b_n)_{n\geq 1} &= (a_n+b_n)_{n\geq 1}, \\
                    t(a_n)_{n\geq 1} &= (ta_n)_{n\geq 1}, \\
                    (a_n)_{n\geq 1}\cdot (b_n)_{n\geq 1} &= (a_n\cdot b_n)_{n\geq 1}. \\
                \end{split}
                \end{equation*}
            If $(b_n)_{n\geq 1} \neq 0$ for all $n$, then:
                \begin{equation*}
                \begin{split}
                    \frac{(a_n)_{n\geq 1}}{(b_n)_{n\geq 1}} & = \left(\frac{a_b}{b_n}\right)_{n\geq 1}.
                \end{split}
                \end{equation*}

            \item Given $(x_n)_{n \geq 1}$ and $k \in \bfN$, consider $(x_{n+k})_{n=0}^\infty = (x_k,x_{k+1},x_{k+1},...)$. This is called a \textit{shift} or the \textit{$k^{\text{th}}$ tail} of $(x_n)_{n \geq 1}$.
            
            \item If $(a_n)_{n \geq 1}$ is a sequence, $a_n \neq 0$ for all $n$, consider:
                \begin{equation*}
                \begin{split}
                    r_n = \frac{a_{n+1}}{a_n}.
                \end{split}
                \end{equation*}
            So $(r_n)_{n \geq 1} = \left(\frac{a_2}{a_1},\frac{a_3}{a_2},\frac{a_4}{a_3},...\right)$. These are called sequences of \textit{ratios}.

            \item Given a real sequence $(x_k)_{k=1}^\infty$, consider the sequence $(s_n)_{n=1}^\infty$ where:
                \begin{equation*}
                \begin{split}
                    s_1 &= x_1 \\
                    s_2 &= x_1 + x_2 = s_1 + x_2 \\
                    s_3 &= x_1 + x_2 + x_3 = s_2 + x_3 \\
                    &\vdots \\
                    s_n &= \sum_{k = 1}^n x_k = s_{n-1} + x_k.
                \end{split}
                \end{equation*}
            We call these \textit{$n^{\text{th}}$ partial sums}. An example of these are geometric sequences and telescoping sequences.
        \end{enumerate}
    \end{example}

\section{Convergence}
    \begin{definition}
        Let $(x_n)_{n\geq 1}$ be a sequence.
        \begin{enumerate}[label = (\arabic*)]
            \item $x_n$ is \textui{increasing} if $x_1 \leq x_2 \leq x_3 \leq ...$
            \item $x_n$ is \textui{decreasing} if $x_1 \geq x_2 \geq x_3 \geq ...$
            \item $x_n$ is \textui{strictly increasing} if $x_1 < x_2 < x_3 < ...$
            \item $x_n$ is \textui{strictly decreasing} if $x_1 > x_2 > x_3 > ...$
        \end{enumerate}
    \end{definition}

    \begin{note}
        A sequence is said to \textit{eventually} have a certain property, if it does not have the said property across all its ordered instances, but will after some instances have passed.
    \end{note}

    \begin{note}
        $x_n$ is \textui{monotone} if it is either increasing or decreasing, strictly increasing, or strictly decreasing.
    \end{note}

    \begin{definition}\label{def:convergence}
        A sequence $(x_n)_n$ in a metric space $X$ \textui{converges} to $x \in X$ if:
            \begin{equation*}
            \begin{split}
                (\forall \epsilon > 0)(\exists N_\epsilon \in \bfN) \mtext{s.t.} n \geq N_\epsilon \implies d(x_n,x) < \epsilon.\footnotemark
            \end{split}
            \end{equation*}
        If no such $x$ exists, the sequence is \textui{divergent}. If $(x_n)_n$ converges to $x$, we write $(x_n)_n \xrightarrow{n \rightarrow \infty} x$ or $\lim_{n \rightarrow \infty}x_n = x$.
        \footnotetext{I try not to use first-order logic symbols but this will be one of the few exceptions.}
    \end{definition}

    \begin{example}
        Let $X = \bfR$. Then from the above definition, write $d(x_n,x) = |x_n - x|$. Recall that this is equivalent to $x_n \in V_\epsilon(x)$. We can visually represent convergence as follows:

        \begin{center}
            \begin{tikzpicture}
                \begin{axis}[
                    axis lines = middle,
                    xmin=0, xmax=11, % x-axis starts at 0 and extends to 10
                    ymin=-1, ymax=10, % y-axis range
                    xtick={1,2,3,4,5,6,7,8,9,10}, % add ticks 1 to 8 on the x-axis
                    xticklabels={1,2,3,4,5,6,7,8,9,10}, % labels for the x-axis ticks
                    ytick={4, 5, 6}, % positions for the y-axis ticks
                    yticklabels={$x-\epsilon$, $x$, $x+\epsilon$}, % labels for the y-axis ticks
                ]

                
                % Add dashed horizontal lines at x+\epsilon and x-\epsilon
                \addplot[dashed, color=red] coordinates {(0, 4) (11, 4)}; % dashed line at x+\epsilon
                \addplot[dashed, color=red] coordinates {(0, 6) (11, 6)}; % dashed line at x-\epsilon

                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(1, 7)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(2, 2.5)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(3, 6.5)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(4, 3)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(5, 6.2)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(6, 4)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(7, 5.8)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(8, 4.4)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(9, 5.3)};
                \addplot[only marks,mark=*,mark options={fill=green},color=green]coordinates {(10, 5)};
        
                \end{axis}
            \end{tikzpicture}
        \end{center}
        If the sequence is convergent it will eventually be contained between the two dashed lines.
    \end{example}

    \begin{example}
        Prove $\left(\frac{1}{n}\right)_{n\geq 1} \rightarrow 0$.
    \end{example}
    \begin{solution}
        Let $\epsilon > 0$ be given. Find $N_\epsilon$ large so $\frac{1}{N_\epsilon} < \epsilon$ (\nameref{prop:arch-2}). So if $n \geq N_\epsilon$, then $\frac{1}{n} \leq \frac{1}{N_\epsilon}$, implying that:
            \begin{equation*}
            \begin{split}
                \left|\frac{1}{n} - 0\right| = \frac{1}{n} \leq \frac{1}{N_\epsilon} < \epsilon.
            \end{split}
            \end{equation*}
    \end{solution}

    \begin{example}
        Prove $\left(\frac{5n-1}{3-n}\right)_{n = 4}^\infty \rightarrow -5$. 
    \end{example}
    \begin{solution}
        Note that:
            \begin{equation*}
            \begin{split}
                |x_n - x|
                & = \left|\frac{5n-1}{3-n} - (-5)\right| \\
                & = \frac{14}{\left|3-n\right|} \\
                & = \frac{14}{n-3}.
            \end{split}
            \end{equation*}
        So given $\epsilon > 0$, we want $\frac{14}{n-3} < \epsilon$, provided $n$ is big enough. This means $\frac{14}{\epsilon} + 3 < n$. We can now start the proof.

        Given $\epsilon > 0$, find $N_\epsilon$ such that $N_\epsilon > \frac{14}{\epsilon} + 3$ (\nameref{prop:arch-1}). Now, if $n \geq N_\epsilon$, then $n > \frac{14}{\epsilon} + 3$ implies $n-3 > \frac{14}{\epsilon}$. Hence:
            \begin{equation*}
            \begin{split}
                \frac{14}{n-3} = \left|x_n - x\right| < \epsilon.
            \end{split}
            \end{equation*}
    \end{solution}
    
    \begin{lemma}
        Let $(X,d)$ be a metric space. Then $(x_n)_n \rightarrow x$ if and only if $(d(x_n,x))_n \rightarrow 0$.
    \end{lemma}
        \begin{proof}
            Suppose $(x_n)_n \rightarrow x$. Let $\epsilon > 0$. Find $N_\epsilon \in \bfN$ such that $n \geq N_\epsilon$ implies $d(x_n , x) \leq \epsilon$. This is equivalent to $|d(x_n, x) - 0 | \leq \epsilon$. The converse follows identically.
        \end{proof}

    \begin{lemma}
        If $(t_n)_n$ is a real sequence, then $(t_n)_n \rightarrow 0$ if and only if $(|t_n|)_n \rightarrow 0$.
    \end{lemma}
        \begin{proof}
            {\color{red} need to do}
        \end{proof}

    \begin{lemma}\label{lemma:thething}
        Let $(X,d)$ be a metric space and $(x_n)_n$ a sequence in $(X,d)$. If $d(x_n,x) \leq c\epsilon_n$, where $c$ is a constant and $(\epsilon_n)_n \rightarrow 0$ with $\epsilon_n > 0$ for all $n$, then $(x_n)_n \rightarrow x$.
    \end{lemma}
        \begin{proof}
        {\color{red} need to do}
        \end{proof}

    \begin{example}
        Prove $\left(\frac{\sin(n^2 - 1)}{n^2 + 3}\right)_n \rightarrow 0$.
    \end{example}
        \begin{solution}
            Note that:
                \begin{equation*}
                \begin{split}
                \left|\frac{\sin(n^2 - 1)}{n^2 + 3} - 0 \right|
                 = \frac{|\sin(n^2 - 1)|}{n^2 + 3} 
                 \leq \frac{1}{n^2 + 3} 
                 \leq \frac{1}{n^2} 
                 \leq \frac{1}{n}.
                \end{split}
                \end{equation*}
            By Lemma~\ref{lemma:thething}, take $c=1$ and $\epsilon_n = \frac{1}{n}$.
        \end{solution}

    \begin{example}
        Prove $\left(\frac{1}{2^n}\right)_n \rightarrow 0$.
    \end{example}
        \begin{solution}
            Note that:
                \begin{equation*}
                \begin{split}
                    \left|\frac{1}{2^n}\right| = \frac{1}{2^n} \leq \frac{1}{n}.
                \end{split}
                \end{equation*}
        \end{solution}
    
    \begin{example}
        Prove $\left(\frac{1}{n} - \frac{1}{n+1}\right)_n \rightarrow 0$.
    \end{example}
        \begin{solution}
            Note that:
                \begin{equation*}
                \begin{split}
                    \left|\frac{1}{n} - \frac{1}{n+1}\right| = \frac{1}{n} - \frac{1}{n+1} \leq \frac{1}{n}.
                \end{split}
                \end{equation*}
        \end{solution}

    \begin{lemma}
        Let $k \geq 1$ be fixed. Given a sequence $(x_n)_n$ in a metric space $(X,d)$, $(x_n)_n \rightarrow x$ if and only if $(x_{k+n})_n \rightarrow x$.
    \end{lemma}
        \begin{proof}
            Let $(x_n)_n \rightarrow x$. Let $\epsilon >0$. We know there exists $N_\epsilon \in \bfN$ with $n \geq N_\epsilon$ implying $d(x_n , x) < \epsilon$. But if $n\geq N_\epsilon$, then $n+k \geq N_\epsilon$. Hence $d(x_{n+k}, x) < \epsilon$.

            Conversely, assume that $(x_{n+k})_n \rightarrow 0$. Let $\epsilon > 0$. We know there exists $N_\epsilon \in \bfN$ such that $n \geq N_\epsilon$ implies $d(x_{n+k}, x) < \epsilon$. Consider $M = N_\epsilon + k$. Then $n \geq M$ implies $n \geq N_\epsilon + k$; i.e., $n-k \geq N_\epsilon$. Hence $d(x_{(n-k)+k}, x)= d(x_n , x) < \epsilon$.
        \end{proof}
    
    \begin{proposition}
        Suppose $(x_n)_n$ is a real sequence with $\left(\left|\frac{x_{n+1}}{x_n}\right|\right)_n \rightarrow L < 1$. Then $(x_n)_n \rightarrow 0$.
    \end{proposition}
        \begin{proof}
            Since $L<1$, let $\rho$ be any number satisfying $L < \rho < 1$. Set $\epsilon = \rho - L$. Since $\left(\left|\frac{x_{n+1}}{x_n}\right|\right)_n \rightarrow L$, we know there exists $N_\epsilon \in \bfN$ such that $n \geq N_\epsilon$ implies $\left|\frac{x_{n+1}}{x_n}\right| < \rho$, or equivalently $|x_{n+1}| < \rho|x_n|$. Now observe that:
                \begin{equation*}
                \begin{split}
                    |x_{N+1}| &< \rho|x_N| \\
                    |x_{N+2}| &< \rho|x_{N+1}| < \rho \cdot \rho |x_N| = \rho^2 |x_N|\\
                    &\vdots
                \end{split}
                \end{equation*}
            Inductively, $|x_{N+n}| < \rho^n|x_N|$ for $n \in \bfN$. But note that $|x_{N+n}| = |x_{N+n} - 0|$ is a tail of $(x_n)_n$. So by taking $\epsilon_n = \rho^n$ and $c = |x_N|$, Lemma~\ref{lemma:thething} gives $(x_n)_n \rightarrow 0$.
        \end{proof}

    \begin{note}
        The negation of Definition~\ref{def:convergence} is:
            \begin{equation*}
            \begin{split}
                (\exists \epsilon_0 > 0)(\forall N_\epsilon \in \bfN) \mtext{s.t.} \exists n \geq N_\epsilon \implies d(x_n,x) \geq \epsilon_0.
            \end{split}
            \end{equation*}
    \end{note}

    \begin{example}
        Prove $((-1)^n)_n$ is divergent.
    \end{example}
        \begin{solution}
            
        \end{solution}
